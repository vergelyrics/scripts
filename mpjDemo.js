document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelector(".firstImage img"),t=e?e.getAttribute("src"):"",n=document.querySelector(".iSongImg");n&&t&&(n.style.backgroundImage=`url(${t})`);const o=document.querySelector(".tableVL td:nth-child(2)"),i=o?o.textContent:"",d=document.querySelector(".iSongTitle");d&&i&&(d.textContent=i);const a=document.querySelector(".videoYt");let s,c=a?a.getAttribute("data-audio"):null;if(!c){const e=a.querySelector("iframe"),t=(e?e.getAttribute("data-src"):"").match(/\/embed\/([^?]*)/);c=t?t[1]:null}if(c){const e=document.getElementById("yt-video-hidden"),t=document.createElement("iframe");t.setAttribute("id","youtube-player"),t.setAttribute("src",`https://www.youtube.com/embed/${c}?enablejsapi=1`),t.setAttribute("allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"),t.setAttribute("allowfullscreen",""),t.setAttribute("title",`${i} Video`),t.setAttribute("width","170"),t.setAttribute("height","170"),e&&e.appendChild(t),function(e){window.onYouTubeIframeAPIReady=function(){s=new YT.Player("youtube-player",{events:{onReady:function(e){!function(e){const t=e.getDuration(),n=f(t,!0),o=document.querySelector(".iRightTime");o&&(o.textContent=n);document.getElementById("loader-music").classList.add("hidden"),document.getElementById("play-btn").classList.remove("hidden");const i=document.getElementById("play-btn"),d=document.getElementById("pause-btn"),a=document.querySelector(".iHeroPB"),s=document.querySelector(".iHeroPL");i.addEventListener("click",(function(){m(e),e.playVideo(),i.classList.add("hidden"),d.classList.remove("hidden"),a.setAttribute("data-text","Pause"),s.classList.add("playing")})),d.addEventListener("click",(function(){e.pauseVideo(),d.classList.add("hidden"),i.classList.remove("hidden"),a.setAttribute("data-text","Play"),s.classList.remove("playing")}));const c=document.getElementById("seek-progress"),l=document.getElementById("seek-knob"),u=document.getElementById("progress-bg");let r=!1;function y(){const e=localStorage.getItem("HideVideo"),t=document.querySelector(".iSongVideo");!e&&t&&t.classList.remove("hidden")}function g(e){const t=Math.min(Math.max(e/c.offsetWidth,0),1);l.style.left=100*t+"%",u.style.width=100*t+"%"}function h(n){const o=Math.min(Math.max(n/c.offsetWidth,0),1),i=t*o;e.seekTo(i,!0),a.setAttribute("data-text","Pause"),s.classList.add("playing")}l.addEventListener("mousedown",(function(e){r=!0})),document.addEventListener("mousemove",(function(e){if(r){const t=c.getBoundingClientRect();g(e.clientX-t.left)}})),document.addEventListener("mouseup",(function(t){if(r){r=!1;const n=c.getBoundingClientRect(),o=t.clientX-n.left;y(),h(o),e.playVideo(),a.setAttribute("data-text","Pause"),s.classList.add("playing")}})),l.addEventListener("touchstart",(function(e){r=!0})),document.addEventListener("touchmove",(function(e){if(r){const t=e.touches[0],n=c.getBoundingClientRect();g(t.clientX-n.left),a.setAttribute("data-text","Pause"),s.classList.add("playing")}})),document.addEventListener("touchend",(function(t){if(r){r=!1;const n=t.changedTouches[0],o=c.getBoundingClientRect(),i=n.clientX-o.left;y(),h(i),e.playVideo(),a.setAttribute("data-text","Pause"),s.classList.add("playing")}})),c.addEventListener("click",(function(n){const o=c.getBoundingClientRect(),i=(n.clientX-o.left)/c.offsetWidth,d=t*i;y(),e.seekTo(d,!0),e.playVideo(),a.setAttribute("data-text","Pause"),s.classList.add("playing")})),setInterval((function(){const n=e.getCurrentTime(),i=f(n),d=f(t-n,!0),a=document.querySelector(".iLeftTime");a&&(a.textContent=i),o&&(o.textContent=d);const s=n/t*100;r||(l.style.left=`${s}%`,u.style.width=`${s}%`)}),1e3)}(s),u=!0},onStateChange:function(e){!function(e){const t=document.getElementById("play-btn"),n=document.getElementById("pause-btn"),o=document.getElementById("loader-music"),i=document.querySelector(".iHeroPB"),d=document.querySelector(".iHeroPL");switch(e.data){case YT.PlayerState.BUFFERING:o.classList.remove("hidden"),t.classList.add("hidden"),n.classList.add("hidden");break;case YT.PlayerState.PLAYING:o.classList.add("hidden"),t.classList.add("hidden"),n.classList.remove("hidden");break;case YT.PlayerState.PAUSED:o.classList.add("hidden"),t.classList.remove("hidden"),n.classList.add("hidden");break;case YT.PlayerState.ENDED:o.classList.add("hidden"),t.classList.remove("hidden"),n.classList.add("hidden"),i.setAttribute("data-text","Play"),d.classList.remove("playing")}}(e)}}})};const t=document.createElement("script");t.src="https://www.youtube.com/iframe_api";const n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n)}()}let l,u=!1;!function(){const e=document.getElementById("play-song-post"),t=e.querySelector(".iHeroPB");e.addEventListener("click",(function(){if(!u)return void toastNotif("Player is loading, Wait...");if("Pause"===t.getAttribute("data-text"))s.pauseVideo(),t.setAttribute("data-text","Play"),e.classList.remove("playing");else{if(!r){if(!localStorage.getItem("HideVideo")){const e=document.querySelector(".iSongVideo");e&&e.classList.remove("hidden")}r=!0}m(s),s.playVideo(),t.setAttribute("data-text","Pause"),e.classList.add("playing")}}))}();let r=!1;function m(e){const t=localStorage.getItem("HideVideo");if(!r&&!t){const e=document.querySelector(".iSongVideo");e&&e.classList.remove("hidden"),r=!0}g("RepeatMode",(function(t){null!==t?y(e):function(e){l&&e.removeEventListener("onStateChange",l)}(e)})),g("AudioMuted",(function(t){null!==t?e.mute():e.unMute()})),localStorage.getItem("RepeatMode")&&y(e),localStorage.getItem("AudioMuted")&&e.mute()}function y(e){const t=document.querySelector(".iHeroPB"),n=document.querySelector(".iHeroPL");l=function(o){o.data===YT.PlayerState.ENDED&&localStorage.getItem("RepeatMode")&&(e.seekTo(0),e.playVideo(),t.setAttribute("data-text","Pause"),n.classList.add("playing"))},e.addEventListener("onStateChange",l)}function g(e,t){window.addEventListener("storage",(function(n){n.key===e&&t(n.newValue)})),setInterval((function(){const n=localStorage.getItem(e);t(n)}),500)}function f(e,t=!1){return`${t?"-":""}${Math.floor(e/60)}:${Math.floor(e%60).toString().padStart(2,"0")}`}})); document.addEventListener("DOMContentLoaded",(function(){var e=document.querySelector(".YTMusicPlayer");e&&e.classList.remove("hidden")}));
