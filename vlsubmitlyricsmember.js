function createAndHandleForm(){const e=document.querySelector(".lyrics-submit-form");if(e){const t='<span class="hedP b" data-text="Lyrics submission form"></span><form id="songForm" method="POST"><div class="inF first" data-message="A valid email address is required."><input type="email" name="email" id="email" placeholder=" " required=""><label for="cf-a-email">Email</label></div><div class="inF" data-message="Song name not set."><input type="text" name="songTitle" id="songTitle" placeholder=" " required=""><label for="cf-a-name">Song Title</label></div><div class="inF" data-message="A valid url address is required."><input type="url" name="youtubeUrl" id="youtubeUrl" placeholder=" " required=""><label for="cf-a-url">YouTube URL</label></div><div class="inF" data-message="Lyrics field cannot be empty."><textarea name="lyrics" id="lyrics" placeholder=" " required=""></textarea><label for="cf-a-lyrics">Message</label></div><button id="cf-a-submit" class="btn" type="submit" value="Send">Submit</button><button id="cf-a-reset" class="btn fTwo" type="reset">Reset</button></form>';e.innerHTML=t;const a=document.getElementById("songForm");a.onsubmit=function(e){e.preventDefault();let t=!0;if(a.querySelectorAll(".inF").forEach(e=>{const a=e.querySelector("input, textarea"),i=e.getAttribute("data-message");if(a.required&&!a.value.trim()&&(toastNotif(i),t=!1),"youtubeUrl"===a.name&&a.value.trim()){const e=a.value.trim();e.startsWith("https://www.youtube.com/")||e.startsWith("https://music.youtube.com/")||(toastNotif("URL is Invalid"),t=!1)}}),t){const e=document.getElementById("email").value.trim(),t="https://script.google.com/macros/s/AKfycbwLA6zxQwxD3rm5q0uEyPuBQ20_M_kj4BpsUK0C1Aya5GMuCGNZXebkjRE7ymRtCCv4mQ/exec",i=`${t}?email=${encodeURIComponent(e)}`;toastNotif("Verifying Email, Please Wait..."),fetch(i).then(e=>e.text()).then(e=>{if("true"===e)toastNotif("Submission Denied: Email Marked As Spam");else{toastNotif("Sending...");const e=new FormData(a);fetch(t,{method:"POST",body:e}).then(e=>e.text()).then(e=>{toastNotif("Successfully Sent"),a.reset()}).catch(e=>{console.error("Error:",e),toastNotif("Failed To Submit Lyrics")})}}).catch(e=>{console.error("Error:",e),toastNotif("Failed to check spam status")})}}}}createAndHandleForm();
