function lyricsSync(){let e,t;const r=document.querySelector('.lyricsContainer[data-sync-lyrics="true"]'),s=document.querySelector(".iSync"),i=document.querySelector(".iLeftTime"),c=()=>{if(s&&(localStorage.getItem("LyricsSync")?s.classList.add("is-active"):s.classList.remove("is-active")),r&&localStorage.getItem("LyricsSync")){if(!i)return void console.error("iLeftTimeElement not found");r.querySelectorAll(".lyricsContainer span[data-time]").forEach(e=>e.classList.add("lyricsFoundSync"));const s=()=>{const e=i.textContent.trim(),t=Array.from(r.querySelectorAll(".lyricsContainer span[data-time]"));let s=null;for(let r=t.length-1;r>=0;r--)if(t[r].getAttribute("data-time").trim()<=e){s=t[r];break}t.forEach(e=>e.classList.remove("highlighted")),s&&s.classList.add("highlighted"),(()=>{if(!r)return;const e=Array.from(r.querySelectorAll(".lyricsContainer span[data-time]"));let t=!1;e.forEach(e=>{e.classList.contains("highlighted")&&(t=!0),t?e.classList.remove("passed"):e.classList.add("passed")})})()};s(),e||(e=new MutationObserver(s)).observe(i,{characterData:!0,subtree:!0,childList:!0}),t||(t=setInterval(s,500))}else r&&(r.querySelectorAll(".lyricsContainer span.lyricsFoundSync, .lyricsContainer span.highlighted, .lyricsContainer span.passed").forEach(e=>{e.classList.remove("lyricsFoundSync","highlighted","passed")}),e&&(e.disconnect(),e=null),t&&(clearInterval(t),t=null))};c(),s&&r&&s.addEventListener("click",()=>{r&&0===r.querySelectorAll(".lyricsContainer span[data-time]").length?alert("Sorry, Lyrics Not Synced"):(s.classList.toggle("is-active")?localStorage.setItem("LyricsSync","true"):localStorage.removeItem("LyricsSync"),c())}),window.addEventListener("storage",e=>{"LyricsSync"===e.key&&c()}),setInterval(()=>{c()},500)}lyricsSync();
