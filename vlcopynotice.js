function processLyrics(){const e=document.querySelector(".lyricsContainer, .lyricsContain");if(!e)return;e.addEventListener("mousedown",u),e.addEventListener("mousemove",u),e.addEventListener("wheel",u),e.addEventListener("touchstart",u),e.addEventListener("touchmove",u),e.addEventListener("touchend",u),e.addEventListener("keydown",u);const t=document.createElement("button");t.classList.add("btn","dldBt"),t.setAttribute("title","Download Lyrics"),t.setAttribute("style","visibility: visible;opacity: 1;background: var(--primary-color);position: absolute;width: 40px;height: 40px;right: 20px;top: -20px;outline: none;border: none;border-radius: 50%;display: flex;align-items: center;justify-content: center;box-shadow: 0 0 15px rgba(0, 0, 0, .09);transition: all .3s ease;-webkit-transition: all .3s ease;cursor: pointer;padding: 5px;"),t.innerHTML='<svg viewBox="0 0 24 24" style="width: 24px; height: 24px; fill: none; stroke: var(--text-color); stroke-linecap: round; stroke-linejoin: round; stroke-width: 1.5;"><polyline points="8 17 12 21 16 17"></polyline><line x1="12" x2="12" y1="12" y2="21"></line><path d="M20.88 18.09A5 5 0 0 0 18 9h-1.26A8 8 0 1 0 3 16.29"></path></svg>',e.appendChild(t);const n=document.querySelector(".tableVL");let o="",i="",l="";n.querySelectorAll("tr").forEach(e=>{const t=e.querySelectorAll("td");if(2===t.length){const e=t[0].innerText.trim(),n=t[1].innerText.trim();"Song"===e?o=n:"Singer"===e?i=n:"Label"===e&&(l=n)}});const a=["Sa","Ni","Dha","Pa","Ma","Ga","Ri","Nu","Re Ra","Ra Ra","Deem","Trikit","Krandha","Krandh","Dhim","Ra","Re","Na","Ae","Aa","Tha","Nee","Kita","Thaka","Dith"],r=["Oh Ho Ho","Ho Ho Oh","Oh Ho Oh","Hmm…","Haan Aan Aa…","Ho Ho","Ho Oh Ho","Ee Ee…"];let s="";function c(e,t=!1){let n=e.innerText.trim();return s=n.split("\n").filter(e=>{let t=a.filter(t=>new RegExp(`\\b${t}\\b`).test(e)).length,n=r.some(t=>e.includes(t));return t<2&&!n}).join("\n").replace(/\n\s*\n/g,"\n").trim(),t?s:s.replace(/[(),]/g,"").trim()}function d(e,t,n,o){return`Song Title: ${e}\nSinger: ${t}\nLabel: ${n}\nPublisher: VergeLyrics\n\n\x3c!-- [Lyrics Starts] --\x3e\n\n${o}\n\n\x3c!-- [Lyrics Ends] --\x3e`}function u(e){const t=e.target.closest(".lyricsContainer, .lyricsContain");t&&function(e){e.querySelectorAll("span[data-text]").forEach(e=>{let t=e.getAttribute("data-text");e.removeAttribute("class"),e.removeAttribute("data-text"),e.innerHTML=t+"<br>"})}(t)}c(e),e.addEventListener("copy",e=>{e.preventDefault();try{let t=window.getSelection();if(!t.rangeCount)return;let n=document.createElement("div");for(let e=0;e<t.rangeCount;e++)n.appendChild(t.getRangeAt(e).cloneContents());n.querySelectorAll(".iMAds").forEach(e=>e.remove()),n.querySelectorAll('[data-copied="disabled"]').forEach(e=>e.remove());let c=n.innerHTML.replace(/\s*\(.*?\)\s*/g,"").replace(/[(),]/g,"").replace(/<\/?p>/g,"\n").replace(/<\/?div>/g,"\n").replace(/<\/?span[^>]*>/g,"").replace(/<br\s*\/?>/g,"\n").replace(/<\/?[^>]+(>|$)/g,"").replace(/\n\s*\n/g,"\n");s=c.split("\n").filter(e=>{let t=a.filter(t=>new RegExp(`\\b${t}\\b`).test(e)).length,n=r.some(t=>e.includes(t));return t<2&&!n}).join("\n").replace(/\n\s*\n/g,"\n").replace(/[(),]/g,"").trim();const u=d(o,i,l,s);e.clipboardData.setData("text/plain",u.trim()),toastNotif("Copied successfully!")}catch(e){toastNotif("Error, cannot copy, try again...")}}),t.addEventListener("click",()=>{if(c(e,!0),"allowed"===localStorage.getItem("lyricsDownloading"))if(s){const n=d(o,i,l,s);try{const i=new Blob([n],{type:"text/plain"}),l=URL.createObjectURL(i),a=document.createElement("a");a.href=l,a.download=`${o.replace(/[^a-zA-Z0-9]/g,"_")}_VergeLyrics.txt`,document.body.appendChild(a),a.click(),document.body.removeChild(a),toastNotif("Lyrics downloaded!"),localStorage.removeItem("lyricsDownloading"),e.removeEventListener("mousedown",u),e.removeEventListener("mousemove",u),e.removeEventListener("wheel",u),e.removeEventListener("touchstart",u),e.removeEventListener("touchmove",u),e.removeEventListener("touchend",u),e.removeEventListener("keydown",u),t.remove()}catch(e){toastNotif("Error downloading...")}}else toastNotif("No lyrics to download!");else{toastNotif("Click at least 1 Google ad to proceed...");const e=document.getElementById("fixedNotif");e&&(e.innerHTML='<div class="fxPu noteCopy" id="antiNote"><div class="fxPuW"><div class="fxPuC"><div class="fxPuS"><svg class="line" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"></circle><line class="svgC" x1="12" x2="12" y1="8" y2="12"></line><line class="svgC" x1="12" x2="12.01" y1="16" y2="16"></line></svg></div><div class="fxPuH">Please note!</div><div class="fxPuD">1. Click on at least one Google ad to initiate the lyrics download. Until an ad is clicked, the download will not proceed.<br>2. Once auto-verified by our system, the download will start automatically. If no ads appear or are not loaded, then reload this page to load Google ads.<br>3. Don\'t worry if the page reloads after clicking ads, you can return here, and your download will still be available.<br><span class="fcMT"><b>Only one lyrics file can be downloaded at a time, saved in .txt format for easy viewing in Notepad.</b></span></div><div class="fxPuCB"><button id="clsNot" class="btn" aria-label="Ok Button" title="Close Notice">Ok, Got it!</button></div></div></div></div>',document.getElementById("clsNot").addEventListener("click",()=>{e.innerHTML=""})),t.disabled=!0,document.querySelectorAll("ins.adsbygoogle").forEach(e=>{e.addEventListener("click",()=>{document.contains(t)&&(localStorage.setItem("lyricsDownloading","allowed"),toastNotif("Click verified, downloading lyrics..."),t.disabled=!0,setTimeout(()=>{t.disabled=!1,t.click()},2e3))})}),document.querySelectorAll("ins.adsbygoogle iframe").forEach(e=>{e.addEventListener("click",()=>{document.contains(t)&&(localStorage.setItem("lyricsDownloading","allowed"),toastNotif("Click verified from iframe, downloading lyrics..."),t.disabled=!0,setTimeout(()=>{t.disabled=!1,t.click()},2e3))})}),window.addEventListener("blur",function(){const e=document.querySelectorAll("ins.adsbygoogle iframe");e.forEach(e=>{if(document.activeElement===e){if(!document.contains(t))return;localStorage.setItem("lyricsDownloading","allowed"),toastNotif("Click detected on iframe, downloading lyrics..."),t.disabled=!0,setTimeout(()=>{t.disabled=!1,t.click()},2e3)}})})}})}processLyrics();
