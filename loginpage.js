const loginContent=document.getElementById("login-page"),loginForm=document.getElementById("loginForm"),errorText=document.getElementById("error"),loadingFetch=document.getElementById("loading-fetch"),overlay=document.getElementById("overlay-login"),loadingLogin=document.getElementById("loading-login"),loggedOutDiv=document.getElementById("logged-out");let loginAttempts=0;const maxAttempts=5,lockoutDuration=30;function updateLoginUI(e){e?(overlay.style.display="none",loginContent.style.display="none",loggedOutDiv.style.display="flex"):(overlay.style.display="block",loadingFetch.style.display="none",loggedOutDiv.style.display="none")}loadingFetch.style.display="block",overlay.style.display="none";const isLoggedIn="true"===localStorage.getItem("loggedIn");function checkLockout(){const e=localStorage.getItem("lockoutEndTime");if(e){const o=(e-Date.now())/1e3;return o>0?(lockLoginForm(o),!0):(localStorage.removeItem("lockoutEndTime"),!1)}return!1}function handleFailedLogin(){if(loginAttempts++,loginAttempts>=5)lockLoginForm(30);else{toastNotif(`You have ${5-loginAttempts} attempts remaining.`),errorText.textContent="Login failed. Username or Password is incorrect.",errorText.style.display="block"}}function lockLoginForm(e){toastNotif("Maximum Login Attempts Reached"),overlay.style.display="none";let o=document.getElementById("countdown");o||(o=document.createElement("div"),o.id="countdown",loginContent.appendChild(o));const t=Date.now()+1e3*e;localStorage.setItem("lockoutEndTime",t);const n=setInterval((()=>{const e=Date.now(),l=Math.round((t-e)/1e3);l>0?o.textContent=`Please wait ${l} seconds.`:(clearInterval(n),o.remove(),overlay.style.display="block",loginAttempts=0,localStorage.removeItem("lockoutEndTime"))}),1e3)}updateLoginUI(isLoggedIn),loginForm.onsubmit=async function(e){e.preventDefault();const o=document.getElementById("username").value,t=document.getElementById("password").value;loadingLogin.style.display="flex",errorText.style.display="none";try{const e=await fetch("https://script.google.com/macros/s/AKfycbx1G4YHDsopQ3rd-K7owskKTkVXecCri4rDNH8DGJ5FrDcukAHpD0jQoT-3Ghla_y0rfA/exec",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:`username=${encodeURIComponent(o)}&password=${encodeURIComponent(t)}`}),n=await e.json();loadingLogin.style.display="none",e.ok&&n.success?(localStorage.setItem("loggedIn","true"),localStorage.setItem("userName",n.name),toastNotif("Welcome "+n.name),loginAttempts=0,updateLoginUI(!0)):handleFailedLogin()}catch(e){loadingLogin.style.display="none",errorText.textContent="An error occurred while processing your request. Please check your internet connection and try again.",errorText.style.display="block"}},loggedOutDiv.addEventListener("click",(function(){localStorage.removeItem("loggedIn"),localStorage.removeItem("userName"),updateLoginUI(!1),loginForm.reset(),loginContent.style.display="block",overlay.style.display="none",loadingLogin.style.display="flex",location.reload(),toastNotif("Logged Out Successfully")})),checkLockout()||updateLoginUI(isLoggedIn);

function checkLocalStorageForUsername(){const e=localStorage.getItem("userName");e&&searchNameInGoogleSheet(e)}const pollInterval=setInterval(checkLocalStorageForUsername,1e3);function searchNameInGoogleSheet(e){const t=new FormData;t.append("name",e);fetch("https://script.google.com/macros/s/AKfycbw4lJ00CLdxbEiK7tO7ZPPRY9ZktRqyKXfoNOIdTqiphB32WzGjFHPlPeJjSH9PiL5e/exec",{method:"POST",body:t}).then((e=>e.json())).then((e=>{"active"===e.status||"deactive"===e.status?displayDetails(e):console.error("Username not found in Google Sheet.")})).catch((e=>{console.error("Error:",e),e instanceof TypeError&&e.message.includes("Failed to fetch")?toastNotif("Slow Internet Connection."):toastNotif("An error occurred while processing your request.")}))}function displayDetails(e){const t=document.getElementById("result"),n=document.getElementById("nameHeader"),o=document.getElementById("status");n.textContent=`${e.name}`,o.textContent="";const a=document.createElement("span");a.textContent="active"===e.status?"Active":"Inactive",a.style.color="active"===e.status?"green":"#e91429",o.appendChild(a),document.getElementById("roleType").textContent=`${e.roleType}`,document.getElementById("location").textContent=`${e.location}`,document.getElementById("image").src=e.imageUrl;const l=new Date(e.showDate),r=new Date,i=Math.abs(r-l),s=Math.ceil(i/864e5);document.getElementById("showDate").textContent=`${s} days ago`;const c=new Date(e.dateOfBirth),d=r.getFullYear()-c.getFullYear();if(document.getElementById("dateOfBirth").textContent=`${d} years`,document.getElementById("languageWork").textContent=`${e.languageWork}`,e.pendingSongs){const t=e.pendingSongs.split(", ").map((function(e){return`<span class="songRequested">${e.trim()}</span>`})).join("");document.getElementById("pendingSongs").innerHTML=t}else document.getElementById("pendingSongs").textContent="Nothing To Show, Keep Browsing";e.noticeField?document.getElementById("noticeField").textContent=`${e.noticeField}`:document.getElementById("noticeField").textContent="There is currently no new notice available for you. Please continue to browse the site, and we will promptly update this section with any new information as it becomes available.",document.getElementById("emailUser").textContent=`${e.emailUser}`,document.getElementById("claimedPage").href=validateUrl(e.claimedPage),document.getElementById("facebookUrl").href=validateUrl(e.facebookUrl),document.getElementById("twitterUrl").href=validateUrl(e.twitterUrl),document.getElementById("instagramUrl").href=validateUrl(e.instagramUrl),t.style.visibility="visible"}function validateUrl(e){return e.startsWith("http://")||e.startsWith("https://")?e:"javascript:;"}

var anchors=document.querySelectorAll("a");anchors.forEach((function(t){t.addEventListener("click",(function(t){"javascript:;"===this.getAttribute("href")&&(toastNotif("Fetching..."),setTimeout((function(){toastNotif("Nothing Found")}),2e3),t.preventDefault())}))}));

const emailInput=document.getElementById("email"),emailUser=document.getElementById("emailUser");emailInput.addEventListener("click",(function(){const e=emailUser.textContent.trim();emailInput.value=e}));

const userName=localStorage.getItem("userName");if(userName){document.getElementById("nameHeader").innerText=userName}

var columnMembers=document.querySelectorAll(".column-member"),recentBlocks=document.querySelectorAll(".recent-blocks"),recentLoginLanguages=document.querySelectorAll(".recent-login-language"),textInnerHeads=document.querySelectorAll(".text-inner-head"),lyricsSubmitForms=document.querySelectorAll(".lyrics-submit-form"),claimedPageBoxes=document.querySelectorAll(".claimedPageBox"),verifyHeroes=document.querySelectorAll(".verifyHero");function setClasses(){"true"===localStorage.getItem("loggedIn")&&(columnMembers.forEach((e=>e.style.display="grid")),recentBlocks.forEach((e=>e.style.display="block")),recentLoginLanguages.forEach((e=>e.style.display="block")),textInnerHeads.forEach((e=>e.style.display="block")),lyricsSubmitForms.forEach((e=>e.style.display="block")),claimedPageBoxes.forEach((e=>e.style.display="block")),verifyHeroes.forEach((e=>e.style.display="flex")),clearInterval(checkInterval))}setClasses();var checkInterval=setInterval((function(){setClasses()}),1e3);

!function(){function e(){var e=document.querySelector('.roleType[data-text="Designation:"]');if(e){var t=e.textContent.trim();if(t.includes("Content Writer")){var n=document.querySelector(".claimedPageBox"),o=document.querySelector(".recent-login-language.artist");n&&n.style.setProperty("display","none","important"),o&&o.style.setProperty("display","none","important")}else if(t.includes("Artist")){var r=document.querySelector('.languageWork[data-text="Working Language:"]'),l=document.querySelector(".result"),i=document.querySelector(".recent-blocks.pendingSongsBox"),s=document.querySelector(".recent-login-language.language"),a=document.querySelector(".recent-login-language.justAdded");r&&r.style.setProperty("display","none","important"),l&&l.style.setProperty("min-height","607px","important"),i&&i.style.setProperty("display","none","important"),s&&s.style.setProperty("display","none","important"),a&&a.style.setProperty("display","none","important")}else if(t.includes("Admin"));else if(t.includes("Developer")){n=document.querySelector(".claimedPageBox"),i=document.querySelector(".recent-blocks.pendingSongsBox"),o=document.querySelector(".recent-login-language.artist"),s=document.querySelector(".recent-login-language.language");n&&n.style.setProperty("display","none","important"),o&&o.style.setProperty("display","none","important"),i&&i.style.setProperty("display","none","important"),s&&s.style.setProperty("display","none","important");var c=document.querySelector(".lyrics-submit-form");c&&(c.style.cursor="not-allowed",c.addEventListener("click",(function(e){e.preventDefault(),toastNotif("Developers Are Not Allowed To Use This Form")})))}}}new MutationObserver(e).observe(document.body,{childList:!0,subtree:!0}),e()}();

document.addEventListener("contextmenu",(function(t){t.preventDefault()})),function t(){try{!function t(n){1===(""+n/n).length&&n%20!=0||function(){}.constructor("debugger")(),t(++n)}(0)}catch(n){setTimeout(t,1e3)}}();
