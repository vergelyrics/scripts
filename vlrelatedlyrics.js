function relatedSongLyrics(){const e=document.querySelector(".tableVL tbody");let t=[];const n=document.querySelector(".lyricsS"),l=n?n.id.split("-")[1]:null,s=document.querySelector(".aboutSongVL p"),a=["Telugu","Hindi","Tamil","Punjabi","Odia","Malayalam","Kannada","Assamese","Bengali","Korean","Khortha","Bhojpuri","Marathi","Haryanvi","Garhwali","Nepali","Chhattisgarhi","Spanish","Nagpuri","English"];let o=null;s&&(o=a.find((e=>s.innerHTML.includes(e)))),e.querySelectorAll("tr").forEach((e=>{const n=e.querySelectorAll("td");"Singer"===n[0].textContent.trim()&&(t=n[1].textContent.split(",").map((e=>e.trim())))}));const r=[],i=[];function c(e){const t=document.querySelector(".relatedP"),n=document.querySelector("#related-head");t.innerHTML="";const s=document.createElement("ul");s.classList.add("res-list");const a=new Set;let o=e.flatMap((({singerPosts:e})=>e.filter((e=>e.postId!==l&&!a.has(e.postId))).map((e=>{a.add(e.postId);const t=e.link.find((e=>"alternate"===e.rel))?.href||"#";let n=e.title?.$t||"Untitled";n=n.replace(/"([^"]*)"/g,"“$1”");const l=e.content.$t.match(/<span class="snipHome">(.*?)<\/span>/),s=l?l[1]:"Song";return`<li class="rel"><div class="rel-thumbnail"><img src="${(e.media$thumbnail?.url||"https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgMo4pyZv7iZwOoHK3gTWIh0xhMaLJ-isF7Hm8wCAbO_oTrj3eBepKvepRqfonGAUoO4gSfOfYfw4MvVhyQBtP_U7OCuGApB3EWSCknk_bL3A6UmkSm3bTejRod2jNZCpYZ_eK1sBelrNlcsxByUM17kyqRFUa1dGtNndjhhqjsh0jZ28kKA9AtS_fTBoA/s300/defaultSong.jpg").replace(/.*?:\/\//g,"//").replace(/\/[w,s][0-9][0-9].*\//g,"/w300-h300-c-rw/").replace(/=s72-[w,c].*/g,"=w300-h300-c-rw")}" width="100%" height="100%" loading="lazy" alt="${n}"/></div><div class="rel-body"><span class="rel-snip">${s}</span><h3 class="rel-title">${n}</h3></div><div class="rel-play"><svg viewBox="0 0 512 512"><path d="M133,440a35.37,35.37,0,0,1-17.5-4.67c-12-6.8-19.46-20-19.46-34.33V111c0-14.37,7.46-27.53,19.46-34.33a35.13,35.13,0,0,1,35.77.45L399.12,225.48a36,36,0,0,1,0,61L151.23,434.88A35.5,35.5,0,0,1,133,440Z"></path></svg></div><a href="${t}" aria-label="${n}" title="${n}">Read now</a></li>`}))));for(let e=o.length-1;e>0;e--){const t=Math.floor(Math.random()*(e+1));[o[e],o[t]]=[o[t],o[e]]}if(o=o.slice(0,18),0===o.length)t.innerHTML='<div class="iNo nothing">No related song lyrics found...</div>',n&&n.classList.add("hidden");else{s.innerHTML=o.join(""),t.appendChild(s);const e=s.querySelectorAll("li");if(e.length>6){e.forEach(((e,t)=>{t>=6&&e.classList.add("hidden")}));const n=document.createElement("button");n.id="load-rel",n.classList.add("btn"),n.textContent="Load more",n.addEventListener("click",(()=>{e.forEach((e=>e.classList.remove("hidden"))),n.remove()})),t.appendChild(n)}n&&n.classList.remove("hidden")}}t.length>0&&t.forEach(((e,t)=>{r[t]=!1,i[t]={singerPosts:[]},async function(e,t){try{const n=await fetch(`/feeds/posts/default/-/${encodeURIComponent(e)}?max-results=20&alt=json`);if(!n.ok)throw new Error("Network response was not ok");const l=await n.json(),s=l.feed?.entry||[];i[t].singerPosts=s.map((t=>{const n=t.id.$t.split("post-")[1],l=t.category?.some((e=>a.includes(e.term)))?t.category.find((e=>a.includes(e.term))).term:null;return o&&l!==o?null:{...t,postId:n,artistName:e}})).filter((e=>null!==e)),r[t]=i[t].singerPosts.length>0,c(i.filter(((e,t)=>r[t])))}catch(n){console.error(`Error fetching posts for ${e}:`,n),r[t]=!1,c(i.filter(((e,t)=>r[t])))}}(e,t)}))}relatedSongLyrics();
