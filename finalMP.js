function showYTMusicPlayer(){var e=document.querySelector(".YTMusicPlayer");e&&e.classList.remove("hidden")}function initializeMusicContent(){const e=document.querySelector(".firstImage img"),t=e?e.getAttribute("src"):"",n=document.querySelector(".iSongImg");n&&t&&(n.style.backgroundImage=`url(${t})`);const i=document.querySelector(".tableVL td:nth-child(2)"),o=i?i.textContent:"",a=document.querySelector(".iSongTitle");a&&o&&(a.textContent=o);const d=document.querySelector(".videoYt");let s,c=d?d.getAttribute("data-audio"):null;if(!c){const e=d.querySelector("iframe"),t=(e?e.getAttribute("data-src"):"").match(/\/embed\/([^?]*)/);c=t?t[1]:null}if(c){const e=document.getElementById("yt-video-hidden"),t=document.createElement("iframe");t.setAttribute("id","youtube-player"),t.setAttribute("src",`https://www.youtube.com/embed/${c}?enablejsapi=1`),t.setAttribute("allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"),t.setAttribute("allowfullscreen",""),t.setAttribute("title",`${o} Video`),t.setAttribute("width","170"),t.setAttribute("height","170"),e&&e.appendChild(t),function(e){window.onYouTubeIframeAPIReady=function(){s=new YT.Player("youtube-player",{events:{onReady:function(e){!function(e){const t=e.getDuration(),n=f(t,!0),i=document.querySelector(".iRightTime");i&&(i.textContent=n),document.getElementById("loader-music").classList.add("hidden"),document.getElementById("play-btn").classList.remove("hidden");const o=document.getElementById("play-btn"),a=document.getElementById("pause-btn"),d=document.querySelector(".iHeroPB"),s=document.querySelector(".iHeroPL");o.addEventListener("click",function(){m(e),e.playVideo(),o.classList.add("hidden"),a.classList.remove("hidden"),d.setAttribute("data-text","Pause"),s.classList.add("playing")}),a.addEventListener("click",function(){e.pauseVideo(),a.classList.add("hidden"),o.classList.remove("hidden"),d.setAttribute("data-text","Play"),s.classList.remove("playing")});const c=document.getElementById("seek-progress"),l=document.getElementById("seek-knob"),u=document.getElementById("progress-bg");let r=!1;function y(){const e=localStorage.getItem("HideVideo"),t=document.querySelector(".iSongVideo");!e&&t&&t.classList.remove("hidden")}function g(e){const t=Math.min(Math.max(e/c.offsetWidth,0),1);l.style.left=100*t+"%",u.style.width=100*t+"%"}function h(n){const i=Math.min(Math.max(n/c.offsetWidth,0),1),o=t*i;e.seekTo(o,!0),d.setAttribute("data-text","Pause"),s.classList.add("playing")}l.addEventListener("mousedown",function(e){r=!0}),document.addEventListener("mousemove",function(e){if(r){const t=c.getBoundingClientRect();g(e.clientX-t.left)}}),document.addEventListener("mouseup",function(t){if(r){r=!1;const n=c.getBoundingClientRect(),i=t.clientX-n.left;y(),h(i),e.playVideo(),d.setAttribute("data-text","Pause"),s.classList.add("playing")}}),l.addEventListener("touchstart",function(e){r=!0}),document.addEventListener("touchmove",function(e){if(r){const t=e.touches[0],n=c.getBoundingClientRect();g(t.clientX-n.left),d.setAttribute("data-text","Pause"),s.classList.add("playing")}}),document.addEventListener("touchend",function(t){if(r){r=!1;const n=t.changedTouches[0],i=c.getBoundingClientRect(),o=n.clientX-i.left;y(),h(o),e.playVideo(),d.setAttribute("data-text","Pause"),s.classList.add("playing")}}),c.addEventListener("click",function(n){const i=c.getBoundingClientRect(),o=(n.clientX-i.left)/c.offsetWidth,a=t*o;y(),e.seekTo(a,!0),e.playVideo(),d.setAttribute("data-text","Pause"),s.classList.add("playing")}),setInterval(function(){const n=e.getCurrentTime(),o=f(n),a=f(t-n,!0),d=document.querySelector(".iLeftTime");d&&(d.textContent=o),i&&(i.textContent=a);const s=n/t*100;r||(l.style.left=`${s}%`,u.style.width=`${s}%`)},1e3)}(s),u=!0},onStateChange:function(e){!function(e){const t=document.getElementById("play-btn"),n=document.getElementById("pause-btn"),i=document.getElementById("loader-music"),o=document.querySelector(".iHeroPB"),a=document.querySelector(".iHeroPL");switch(e.data){case YT.PlayerState.BUFFERING:i.classList.remove("hidden"),t.classList.add("hidden"),n.classList.add("hidden");break;case YT.PlayerState.PLAYING:i.classList.add("hidden"),t.classList.add("hidden"),n.classList.remove("hidden");break;case YT.PlayerState.PAUSED:i.classList.add("hidden"),t.classList.remove("hidden"),n.classList.add("hidden");break;case YT.PlayerState.ENDED:i.classList.add("hidden"),t.classList.remove("hidden"),n.classList.add("hidden"),o.setAttribute("data-text","Play"),a.classList.remove("playing")}}(e)}}})};const t=document.createElement("script");t.src="https://www.youtube.com/iframe_api";const n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n)}()}let l,u=!1;!function(){const e=document.getElementById("play-song-post"),t=e.querySelector(".iHeroPB");e.addEventListener("click",function(){if(u)if("Pause"===t.getAttribute("data-text"))s.pauseVideo(),t.setAttribute("data-text","Play"),e.classList.remove("playing");else{if(!r){if(!localStorage.getItem("HideVideo")){const e=document.querySelector(".iSongVideo");e&&e.classList.remove("hidden")}r=!0}m(s),s.playVideo(),t.setAttribute("data-text","Pause"),e.classList.add("playing")}else toastNotif("Player is loading, Wait...")})}();let r=!1;function m(e){const t=localStorage.getItem("HideVideo");if(!r&&!t){const e=document.querySelector(".iSongVideo");e&&e.classList.remove("hidden"),r=!0}g("RepeatMode",function(t){null!==t?y(e):function(e){l&&e.removeEventListener("onStateChange",l)}(e)}),g("AudioMuted",function(t){null!==t?e.mute():e.unMute()}),localStorage.getItem("RepeatMode")&&y(e),localStorage.getItem("AudioMuted")&&e.mute()}function y(e){const t=document.querySelector(".iHeroPB"),n=document.querySelector(".iHeroPL");l=function(i){i.data===YT.PlayerState.ENDED&&localStorage.getItem("RepeatMode")&&(e.seekTo(0),e.playVideo(),t.setAttribute("data-text","Pause"),n.classList.add("playing"))},e.addEventListener("onStateChange",l)}function g(e,t){window.addEventListener("storage",function(n){n.key===e&&t(n.newValue)}),setInterval(function(){const n=localStorage.getItem(e);t(n)},500)}function f(e,t=!1){return`${t?"-":""}${Math.floor(e/60)}:${Math.floor(e%60).toString().padStart(2,"0")}`}}showYTMusicPlayer(),initializeMusicContent();
